import{f as w,g as R,h as d,o as r,w as c,r as b,d as M,m as $,i as n,P as k,j as ie,k as re,l as oe,n as z,p as ue,q as ce,t as V,s as se,v as ne,x as de,y as ge,z as O,A as L,B as ee,C as q,D as le,c as E,E as fe,F as ve,G as pe,b as C,H as A,I as j,J as K,K as be,L as me,M as ae,N as ye,O as xe,a as G,Q as he,R as ze}from"./COxBgtSO.js";import{u as te,q as J}from"./ZLCE5YqS.js";const Pe=w({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return R(),(a,i)=>(r(),d(n(k),$(t,{"data-type":"ellipsis"}),{default:c(()=>[b(a.$slots,"default",{},()=>[i[0]||(i[0]=M("â€¦"))])]),_:3},16))}}),[F,Ie]=ie("PaginationRoot"),qe=w({__name:"PaginationRoot",props:{page:{},defaultPage:{default:1},itemsPerPage:{},total:{default:0},siblingCount:{default:2},disabled:{type:Boolean},showEdges:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"nav"}},emits:["update:page"],setup(e,{emit:t}){const a=e,i=t,{siblingCount:l,disabled:s,showEdges:o}=re(a);R();const y=oe(a,"page",i,{defaultValue:a.defaultPage,passive:a.page===void 0}),m=z(()=>Math.max(1,Math.ceil(a.total/(a.itemsPerPage||1))));return Ie({page:y,onPageChange(p){y.value=p},pageCount:m,siblingCount:l,disabled:s,showEdges:o}),(p,g)=>(r(),d(n(k),{as:p.as,"as-child":p.asChild},{default:c(()=>[b(p.$slots,"default",{page:n(y),pageCount:m.value})]),_:3},8,["as","as-child"]))}}),Ce=w({__name:"PaginationFirst",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e,a=F();R();const i=z(()=>a.page.value===1||a.disabled.value);return(l,s)=>(r(),d(n(k),$(t,{"aria-label":"First Page",type:l.as==="button"?"button":void 0,disabled:i.value,onClick:s[0]||(s[0]=o=>!i.value&&n(a).onPageChange(1))}),{default:c(()=>[b(l.$slots,"default",{},()=>[s[1]||(s[1]=M("First page"))])]),_:3},16,["type","disabled"]))}}),$e=w({__name:"PaginationLast",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e,a=F();R();const i=z(()=>a.page.value===a.pageCount.value||a.disabled.value);return(l,s)=>(r(),d(n(k),$(t,{"aria-label":"Last Page",type:l.as==="button"?"button":void 0,disabled:i.value,onClick:s[0]||(s[0]=o=>!i.value&&n(a).onPageChange(n(a).pageCount.value))}),{default:c(()=>[b(l.$slots,"default",{},()=>[s[1]||(s[1]=M("Last page"))])]),_:3},16,["type","disabled"]))}});function B(e,t){const a=t-e+1;return Array.from({length:a},(i,l)=>l+e)}function we(e){return e.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const T="ellipsis";function ke(e,t,a,i){const s=t,o=Math.max(e-a,1),y=Math.min(e+a,s);if(i){const p=Math.min(2*a+5,t)-2,g=o>3&&Math.abs(s-p-1+1)>2&&Math.abs(o-1)>2,u=y<s-2&&Math.abs(s-p)>2&&Math.abs(s-y)>2;if(!g&&u)return[...B(1,p),T,s];if(g&&!u){const v=B(s-p+1,s);return[1,T,...v]}if(g&&u){const v=B(o,y);return[1,T,...v,T,s]}return B(1,s)}else{const m=a*2+1;return t<m?B(1,s):e<=a+1?B(1,m):t-e<=a?B(t-m+1,s):B(o,y)}}const Se=w({__name:"PaginationList",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;R();const a=F(),i=z(()=>we(ke(a.page.value,a.pageCount.value,a.siblingCount.value,a.showEdges.value)));return(l,s)=>(r(),d(n(k),ue(ce(t)),{default:c(()=>[b(l.$slots,"default",{items:i.value})]),_:3},16))}}),Be=w({__name:"PaginationListItem",props:{value:{},asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;R();const a=F(),i=z(()=>a.page.value===t.value),l=z(()=>a.disabled.value);return(s,o)=>(r(),d(n(k),$(t,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":i.value?"page":void 0,"data-selected":i.value?"true":void 0,disabled:l.value,type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=y=>!l.value&&n(a).onPageChange(s.value))}),{default:c(()=>[b(s.$slots,"default",{},()=>[M(V(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Re=w({__name:"PaginationNext",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;R();const a=F(),i=z(()=>a.page.value===a.pageCount.value||a.disabled.value);return(l,s)=>(r(),d(n(k),$(t,{"aria-label":"Next Page",type:l.as==="button"?"button":void 0,disabled:i.value,onClick:s[0]||(s[0]=o=>!i.value&&n(a).onPageChange(n(a).page.value+1))}),{default:c(()=>[b(l.$slots,"default",{},()=>[s[1]||(s[1]=M("Next page"))])]),_:3},16,["type","disabled"]))}}),Ne=w({__name:"PaginationPrev",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;R();const a=F(),i=z(()=>a.page.value===1||a.disabled.value);return(l,s)=>(r(),d(n(k),$(t,{"aria-label":"Previous Page",type:l.as==="button"?"button":void 0,disabled:i.value,onClick:s[0]||(s[0]=o=>!i.value&&n(a).onPageChange(n(a).page.value-1))}),{default:c(()=>[b(l.$slots,"default",{},()=>[s[1]||(s[1]=M("Prev page"))])]),_:3},16,["type","disabled"]))}}),Ae={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{buttonGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-md",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-md",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-md",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}},square:{true:""}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-primary text-inverted"},{color:"secondary",variant:"solid",class:"bg-secondary text-inverted"},{color:"success",variant:"solid",class:"bg-success text-inverted"},{color:"info",variant:"solid",class:"bg-info text-inverted"},{color:"warning",variant:"solid",class:"bg-warning text-inverted"},{color:"error",variant:"solid",class:"bg-error text-inverted"},{color:"primary",variant:"outline",class:"text-primary ring ring-inset ring-primary/50"},{color:"secondary",variant:"outline",class:"text-secondary ring ring-inset ring-secondary/50"},{color:"success",variant:"outline",class:"text-success ring ring-inset ring-success/50"},{color:"info",variant:"outline",class:"text-info ring ring-inset ring-info/50"},{color:"warning",variant:"outline",class:"text-warning ring ring-inset ring-warning/50"},{color:"error",variant:"outline",class:"text-error ring ring-inset ring-error/50"},{color:"primary",variant:"soft",class:"bg-primary/10 text-primary"},{color:"secondary",variant:"soft",class:"bg-secondary/10 text-secondary"},{color:"success",variant:"soft",class:"bg-success/10 text-success"},{color:"info",variant:"soft",class:"bg-info/10 text-info"},{color:"warning",variant:"soft",class:"bg-warning/10 text-warning"},{color:"error",variant:"soft",class:"bg-error/10 text-error"},{color:"primary",variant:"subtle",class:"bg-primary/10 text-primary ring ring-inset ring-primary/25"},{color:"secondary",variant:"subtle",class:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"},{color:"success",variant:"subtle",class:"bg-success/10 text-success ring ring-inset ring-success/25"},{color:"info",variant:"subtle",class:"bg-info/10 text-info ring ring-inset ring-info/25"},{color:"warning",variant:"subtle",class:"bg-warning/10 text-warning ring ring-inset ring-warning/25"},{color:"error",variant:"subtle",class:"bg-error/10 text-error ring ring-inset ring-error/25"},{color:"neutral",variant:"solid",class:"text-inverted bg-inverted"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-accented text-default bg-default"},{color:"neutral",variant:"soft",class:"text-default bg-elevated"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-accented text-default bg-elevated"},{size:"xs",square:!0,class:"p-0.5"},{size:"sm",square:!0,class:"p-1"},{size:"md",square:!0,class:"p-1"},{size:"lg",square:!0,class:"p-1"},{size:"xl",square:!0,class:"p-1"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},Le={__name:"Badge",props:{as:{type:null,required:!1,default:"span"},label:{type:[String,Number],required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1}},setup(e){const t=e,a=se(),i=ne(),{orientation:l,size:s}=de(t),{isLeading:o,isTrailing:y,leadingIconName:m,trailingIconName:p}=ge(t),g=z(()=>{var u;return O({extend:O(Ae),...((u=i.ui)==null?void 0:u.badge)||{}})({color:t.color,variant:t.variant,size:s.value||t.size,square:t.square||!a.default&&!t.label,buttonGroup:l.value})});return(u,x)=>{var v;return r(),d(n(k),{as:e.as,class:q(g.value.base({class:[(v=t.ui)==null?void 0:v.base,t.class]}))},{default:c(()=>[b(u.$slots,"leading",{},()=>{var P,N,I;return[n(o)&&n(m)?(r(),d(ee,{key:0,name:n(m),class:q(g.value.leadingIcon({class:(P=t.ui)==null?void 0:P.leadingIcon}))},null,8,["name","class"])):e.avatar?(r(),d(le,$({key:1,size:((N=t.ui)==null?void 0:N.leadingAvatarSize)||g.value.leadingAvatarSize()},e.avatar,{class:g.value.leadingAvatar({class:(I=t.ui)==null?void 0:I.leadingAvatar})}),null,16,["size","class"])):L("",!0)]}),b(u.$slots,"default",{},()=>{var P;return[e.label!==void 0&&e.label!==null?(r(),E("span",{key:0,class:q(g.value.label({class:(P=t.ui)==null?void 0:P.label}))},V(e.label),3)):L("",!0)]}),b(u.$slots,"trailing",{},()=>{var P;return[n(y)&&n(p)?(r(),d(ee,{key:0,name:n(p),class:q(g.value.trailingIcon({class:(P=t.ui)==null?void 0:P.trailingIcon}))},null,8,["name","class"])):L("",!0)]})]),_:3},8,["as","class"])}}},Ee={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},Me={__name:"Pagination",props:{as:{type:null,required:!1},firstIcon:{type:String,required:!1},prevIcon:{type:String,required:!1},nextIcon:{type:String,required:!1},lastIcon:{type:String,required:!1},ellipsisIcon:{type:String,required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1,default:"md"},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(e,{emit:t}){const a=e,i=t,l=se(),{dir:s}=fe(),o=ne(),y=ve(pe(a,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),i),m=z(()=>a.firstIcon||(s.value==="rtl"?o.ui.icons.chevronDoubleRight:o.ui.icons.chevronDoubleLeft)),p=z(()=>a.prevIcon||(s.value==="rtl"?o.ui.icons.chevronRight:o.ui.icons.chevronLeft)),g=z(()=>a.nextIcon||(s.value==="rtl"?o.ui.icons.chevronLeft:o.ui.icons.chevronRight)),u=z(()=>a.lastIcon||(s.value==="rtl"?o.ui.icons.chevronDoubleLeft:o.ui.icons.chevronDoubleRight)),x=z(()=>{var v;return O({extend:O(Ee),...((v=o.ui)==null?void 0:v.pagination)||{}})()});return(v,P)=>{var N;return r(),d(n(qe),$(n(y),{class:x.value.root({class:[(N=a.ui)==null?void 0:N.root,a.class]})}),{default:c(({page:I,pageCount:D})=>{var h;return[C(n(Se),{class:q(x.value.list({class:(h=a.ui)==null?void 0:h.list}))},{default:c(({items:U})=>{var S,Q,W,X;return[e.showControls||l.first?(r(),d(n(Ce),{key:0,"as-child":"",class:q(x.value.first({class:(S=a.ui)==null?void 0:S.first}))},{default:c(()=>[b(v.$slots,"first",{},()=>{var f;return[C(A,{color:e.color,variant:e.variant,size:e.size,icon:m.value,to:(f=e.to)==null?void 0:f.call(e,1)},null,8,["color","variant","size","icon","to"])]})]),_:3},8,["class"])):L("",!0),e.showControls||l.prev?(r(),d(n(Ne),{key:1,"as-child":"",class:q(x.value.prev({class:(Q=a.ui)==null?void 0:Q.prev}))},{default:c(()=>[b(v.$slots,"prev",{},()=>{var f;return[C(A,{color:e.color,variant:e.variant,size:e.size,icon:p.value,to:I>1?(f=e.to)==null?void 0:f.call(e,I-1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):L("",!0),(r(!0),E(j,null,K(U,(f,H)=>{var Y,Z;return r(),E(j,null,[f.type==="page"?(r(),d(n(Be),{key:H,"as-child":"",value:f.value,class:q(x.value.item({class:(Y=a.ui)==null?void 0:Y.item}))},{default:c(()=>[b(v.$slots,"item",$({ref_for:!0},{item:f,index:H,page:I,pageCount:D}),()=>{var _;return[C(A,{color:I===f.value?e.activeColor:e.color,variant:I===f.value?e.activeVariant:e.variant,size:e.size,label:String(f.value),ui:{label:x.value.label()},to:(_=e.to)==null?void 0:_.call(e,f.value),square:""},null,8,["color","variant","size","label","ui","to"])]})]),_:2},1032,["value","class"])):(r(),d(n(Pe),{key:f.type,index:H,"as-child":"",class:q(x.value.ellipsis({class:(Z=a.ui)==null?void 0:Z.ellipsis}))},{default:c(()=>[b(v.$slots,"ellipsis",{},()=>[C(A,{color:e.color,variant:e.variant,size:e.size,icon:e.ellipsisIcon||n(o).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:2},1032,["index","class"]))],64)}),256)),e.showControls||l.next?(r(),d(n(Re),{key:2,"as-child":"",class:q(x.value.next({class:(W=a.ui)==null?void 0:W.next}))},{default:c(()=>[b(v.$slots,"next",{},()=>{var f;return[C(A,{color:e.color,variant:e.variant,size:e.size,icon:g.value,to:I<D?(f=e.to)==null?void 0:f.call(e,I+1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):L("",!0),e.showControls||l.last?(r(),d(n($e),{key:3,"as-child":"",class:q(x.value.last({class:(X=a.ui)==null?void 0:X.last}))},{default:c(()=>[b(v.$slots,"last",{},()=>{var f;return[C(A,{color:e.color,variant:e.variant,size:e.size,icon:u.value,to:(f=e.to)==null?void 0:f.call(e,D)},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):L("",!0)]}),_:2},1032,["class"])]}),_:3},16,["class"])}}},Ve={class:"sm:grid sm:grid-cols-2 lg:grid-cols-3"},Fe={class:"flex-1"},De={class:"h4"},Ue={class:"h6"},Ge={class:"h5"},Ke=w({__name:"index",async setup(e){let t,a;const{query:i}=be(),l=me(Number(i.page)||1),{data:s}=([t,a]=ae(()=>te("sites",()=>J("sites").count())),t=await t,a(),t),o=z(()=>`sites/page/${l.value}/${s.value?Math.ceil(s.value/18):0}`),{data:y}=([t,a]=ae(()=>te(o,()=>J("sites").skip(18*(l.value-1)).limit(18).all(),{transform:g=>g.flat().toSorted((u,x)=>Number(u.point)-Number(x.point))})),t=await t,a(),t),m=ye({}),p=g=>(m[g]||J("types").where("path","LIKE",`%${g}`).first().then(u=>{m[g]=(u==null?void 0:u.label)||""}),m[g]);return(g,u)=>{const x=le,v=Le,P=he,N=A,I=ze,D=Me;return r(),E("div",Ve,[(r(!0),E(j,null,K(n(y),h=>(r(),d(I,{key:h.id,class:"sm:flex sm:flex-col",ui:{header:"flex",body:"flex-1",footer:"flex items-center justify-between"}},{header:c(()=>[G("div",Fe,[G("h3",De,V(h.name),1),G("p",Ue,V(p(h.type)||h.type),1)]),C(x,{src:h.logo,size:"xl"},null,8,["src"])]),footer:c(()=>[C(P,null,{default:c(()=>[(r(!0),E(j,null,K(h.keywords.replace(new RegExp("^\\s*((?:\\w|,\\s?){1,15}(?:\\w|(?<=\\w)[^,\\w](?=\\w))*).*"),"$1").split(","),(U,S)=>(r(),d(v,{key:S,variant:S%2!==0?"outline":"subtle"},{default:c(()=>[u[1]||(u[1]=G("span",{class:"text-secondary"},"#",-1)),M(V(U.trim()),1)]),_:2,__:[1]},1032,["variant"]))),128))]),_:2},1024),C(P,null,{default:c(()=>[(r(!0),E(j,null,K(h.sameAs,(U,S)=>(r(),d(N,{key:S,icon:"i-lucide-link",variant:S%2===0?"outline":"subtle",color:"secondary",to:U,external:""},null,8,["variant","to"]))),128))]),_:2},1024)]),default:c(()=>[G("address",Ge,V(h.geo.address),1)]),_:2},1024))),128)),C(D,{page:n(l),"onUpdate:page":u[0]||(u[0]=h=>xe(l)?l.value=h:null),class:"col-start-1 -col-end-1 mt-4 sm:mt-6 lg:mt-8",ui:{list:"justify-center"},total:n(s)||0,"items-per-page":18,to:h=>({query:{page:h}})},null,8,["page","total","to"])])}}});export{Ke as default};
