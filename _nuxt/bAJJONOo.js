import{f as $,g as B,h as c,o as i,w as d,r as y,d as E,m as w,i as l,P as k,j as re,k as ie,l as oe,n as q,p as ue,q as de,t as M,s as se,v as le,x as ce,y as ge,z as K,A as _,B as ee,C as I,D as ne,c as A,E as fe,F as ve,G as pe,b as C,H as R,I as G,J as T,K as ye,L as be,M as ae,N as me,O as xe,a as U,Q as Pe,R as qe}from"./CuDRupy_.js";import{u as te,q as H}from"./DCyqJ9jD.js";var he=$({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;return B(),(a,r)=>(i(),c(l(k),w(t,{"data-type":"ellipsis"}),{default:d(()=>[y(a.$slots,"default",{},()=>[r[0]||(r[0]=E("â€¦"))])]),_:3},16))}}),ze=he;const[F,Ie]=re("PaginationRoot");var Ce=$({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(e,{emit:t}){const a=e,r=t,{siblingCount:n,disabled:s,showEdges:o}=ie(a);B();const m=oe(a,"page",r,{defaultValue:a.defaultPage,passive:a.page===void 0}),b=q(()=>Math.max(1,Math.ceil(a.total/(a.itemsPerPage||1))));return Ie({page:m,onPageChange(p){m.value=p},pageCount:b,siblingCount:n,disabled:s,showEdges:o}),(p,g)=>(i(),c(l(k),{as:p.as,"as-child":p.asChild},{default:d(()=>[y(p.$slots,"default",{page:l(m),pageCount:b.value})]),_:3},8,["as","as-child"]))}}),we=Ce,$e=$({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,a=F();B();const r=q(()=>a.page.value===1||a.disabled.value);return(n,s)=>(i(),c(l(k),w(t,{"aria-label":"First Page",type:n.as==="button"?"button":void 0,disabled:r.value,onClick:s[0]||(s[0]=o=>!r.value&&l(a).onPageChange(1))}),{default:d(()=>[y(n.$slots,"default",{},()=>[s[1]||(s[1]=E("First page"))])]),_:3},16,["type","disabled"]))}}),ke=$e,Ne=$({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,a=F();B();const r=q(()=>a.page.value===a.pageCount.value||a.disabled.value);return(n,s)=>(i(),c(l(k),w(t,{"aria-label":"Last Page",type:n.as==="button"?"button":void 0,disabled:r.value,onClick:s[0]||(s[0]=o=>!r.value&&l(a).onPageChange(l(a).pageCount.value))}),{default:d(()=>[y(n.$slots,"default",{},()=>[s[1]||(s[1]=E("Last page"))])]),_:3},16,["type","disabled"]))}}),Se=Ne;function S(e,t){const a=t-e+1;return Array.from({length:a},(r,n)=>n+e)}function Be(e){return e.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const j="ellipsis";function Le(e,t,a,r){const s=t,o=Math.max(e-a,1),m=Math.min(e+a,s);if(r){const p=Math.min(2*a+5,t)-2,g=o>3&&Math.abs(s-p-1+1)>2&&Math.abs(o-1)>2,u=m<s-2&&Math.abs(s-p)>2&&Math.abs(s-m)>2;if(!g&&u)return[...S(1,p),j,s];if(g&&!u){const v=S(s-p+1,s);return[1,j,...v]}if(g&&u){const v=S(o,m);return[1,j,...v,j,s]}return S(1,s)}else{const b=a*2+1;return t<b?S(1,s):e<=a+1?S(1,b):t-e<=a?S(t-b+1,s):S(o,m)}}var Re=$({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;B();const a=F(),r=q(()=>Be(Le(a.page.value,a.pageCount.value,a.siblingCount.value,a.showEdges.value)));return(n,s)=>(i(),c(l(k),ue(de(t)),{default:d(()=>[y(n.$slots,"default",{items:r.value})]),_:3},16))}}),_e=Re,Ae=$({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;B();const a=F(),r=q(()=>a.page.value===t.value),n=q(()=>a.disabled.value);return(s,o)=>(i(),c(l(k),w(t,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":r.value?"page":void 0,"data-selected":r.value?"true":void 0,disabled:n.value,type:s.as==="button"?"button":void 0,onClick:o[0]||(o[0]=m=>!n.value&&l(a).onPageChange(s.value))}),{default:d(()=>[y(s.$slots,"default",{},()=>[E(M(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Ee=Ae,Me=$({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;B();const a=F(),r=q(()=>a.page.value===a.pageCount.value||a.disabled.value);return(n,s)=>(i(),c(l(k),w(t,{"aria-label":"Next Page",type:n.as==="button"?"button":void 0,disabled:r.value,onClick:s[0]||(s[0]=o=>!r.value&&l(a).onPageChange(l(a).page.value+1))}),{default:d(()=>[y(n.$slots,"default",{},()=>[s[1]||(s[1]=E("Next page"))])]),_:3},16,["type","disabled"]))}}),Fe=Me,Ve=$({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;B();const a=F(),r=q(()=>a.page.value===1||a.disabled.value);return(n,s)=>(i(),c(l(k),w(t,{"aria-label":"Previous Page",type:n.as==="button"?"button":void 0,disabled:r.value,onClick:s[0]||(s[0]=o=>!r.value&&l(a).onPageChange(l(a).page.value-1))}),{default:d(()=>[y(n.$slots,"default",{},()=>[s[1]||(s[1]=E("Prev page"))])]),_:3},16,["type","disabled"]))}}),De=Ve;const Ue={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{buttonGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none focus-visible:z-[1]",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none focus-visible:z-[1]"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-sm",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-md",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-md",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-md",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}},square:{true:""}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-primary text-inverted"},{color:"secondary",variant:"solid",class:"bg-secondary text-inverted"},{color:"success",variant:"solid",class:"bg-success text-inverted"},{color:"info",variant:"solid",class:"bg-info text-inverted"},{color:"warning",variant:"solid",class:"bg-warning text-inverted"},{color:"error",variant:"solid",class:"bg-error text-inverted"},{color:"primary",variant:"outline",class:"text-primary ring ring-inset ring-primary/50"},{color:"secondary",variant:"outline",class:"text-secondary ring ring-inset ring-secondary/50"},{color:"success",variant:"outline",class:"text-success ring ring-inset ring-success/50"},{color:"info",variant:"outline",class:"text-info ring ring-inset ring-info/50"},{color:"warning",variant:"outline",class:"text-warning ring ring-inset ring-warning/50"},{color:"error",variant:"outline",class:"text-error ring ring-inset ring-error/50"},{color:"primary",variant:"soft",class:"bg-primary/10 text-primary"},{color:"secondary",variant:"soft",class:"bg-secondary/10 text-secondary"},{color:"success",variant:"soft",class:"bg-success/10 text-success"},{color:"info",variant:"soft",class:"bg-info/10 text-info"},{color:"warning",variant:"soft",class:"bg-warning/10 text-warning"},{color:"error",variant:"soft",class:"bg-error/10 text-error"},{color:"primary",variant:"subtle",class:"bg-primary/10 text-primary ring ring-inset ring-primary/25"},{color:"secondary",variant:"subtle",class:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"},{color:"success",variant:"subtle",class:"bg-success/10 text-success ring ring-inset ring-success/25"},{color:"info",variant:"subtle",class:"bg-info/10 text-info ring ring-inset ring-info/25"},{color:"warning",variant:"subtle",class:"bg-warning/10 text-warning ring ring-inset ring-warning/25"},{color:"error",variant:"subtle",class:"bg-error/10 text-error ring ring-inset ring-error/25"},{color:"neutral",variant:"solid",class:"text-inverted bg-inverted"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-accented text-default bg-default"},{color:"neutral",variant:"soft",class:"text-default bg-elevated"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-accented text-default bg-elevated"},{size:"xs",square:!0,class:"p-0.5"},{size:"sm",square:!0,class:"p-1"},{size:"md",square:!0,class:"p-1"},{size:"lg",square:!0,class:"p-1"},{size:"xl",square:!0,class:"p-1"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},Ge={__name:"Badge",props:{as:{type:null,required:!1,default:"span"},label:{type:[String,Number],required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1}},setup(e){const t=e,a=se(),r=le(),{orientation:n,size:s}=ce(t),{isLeading:o,isTrailing:m,leadingIconName:b,trailingIconName:p}=ge(t),g=q(()=>{var u;return K({extend:K(Ue),...((u=r.ui)==null?void 0:u.badge)||{}})({color:t.color,variant:t.variant,size:s.value||t.size,square:t.square||!a.default&&!t.label,buttonGroup:n.value})});return(u,x)=>{var v;return i(),c(l(k),{as:e.as,class:I(g.value.base({class:[(v=t.ui)==null?void 0:v.base,t.class]}))},{default:d(()=>[y(u.$slots,"leading",{},()=>{var h,L,z;return[l(o)&&l(b)?(i(),c(ee,{key:0,name:l(b),class:I(g.value.leadingIcon({class:(h=t.ui)==null?void 0:h.leadingIcon}))},null,8,["name","class"])):e.avatar?(i(),c(ne,w({key:1,size:((L=t.ui)==null?void 0:L.leadingAvatarSize)||g.value.leadingAvatarSize()},e.avatar,{class:g.value.leadingAvatar({class:(z=t.ui)==null?void 0:z.leadingAvatar})}),null,16,["size","class"])):_("",!0)]}),y(u.$slots,"default",{},()=>{var h;return[e.label!==void 0&&e.label!==null?(i(),A("span",{key:0,class:I(g.value.label({class:(h=t.ui)==null?void 0:h.label}))},M(e.label),3)):_("",!0)]}),y(u.$slots,"trailing",{},()=>{var h;return[l(m)&&l(p)?(i(),c(ee,{key:0,name:l(p),class:I(g.value.trailingIcon({class:(h=t.ui)==null?void 0:h.trailingIcon}))},null,8,["name","class"])):_("",!0)]})]),_:3},8,["as","class"])}}},je={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},Te={__name:"Pagination",props:{as:{type:null,required:!1},firstIcon:{type:String,required:!1},prevIcon:{type:String,required:!1},nextIcon:{type:String,required:!1},lastIcon:{type:String,required:!1},ellipsisIcon:{type:String,required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1,default:"md"},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(e,{emit:t}){const a=e,r=t,n=se(),{dir:s}=fe(),o=le(),m=ve(pe(a,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),r),b=q(()=>a.firstIcon||(s.value==="rtl"?o.ui.icons.chevronDoubleRight:o.ui.icons.chevronDoubleLeft)),p=q(()=>a.prevIcon||(s.value==="rtl"?o.ui.icons.chevronRight:o.ui.icons.chevronLeft)),g=q(()=>a.nextIcon||(s.value==="rtl"?o.ui.icons.chevronLeft:o.ui.icons.chevronRight)),u=q(()=>a.lastIcon||(s.value==="rtl"?o.ui.icons.chevronDoubleLeft:o.ui.icons.chevronDoubleRight)),x=q(()=>{var v;return K({extend:K(je),...((v=o.ui)==null?void 0:v.pagination)||{}})()});return(v,h)=>{var L;return i(),c(l(we),w(l(m),{class:x.value.root({class:[(L=a.ui)==null?void 0:L.root,a.class]})}),{default:d(({page:z,pageCount:V})=>{var P;return[C(l(_e),{class:I(x.value.list({class:(P=a.ui)==null?void 0:P.list}))},{default:d(({items:D})=>{var N,J,Q,W;return[e.showControls||n.first?(i(),c(l(ke),{key:0,"as-child":"",class:I(x.value.first({class:(N=a.ui)==null?void 0:N.first}))},{default:d(()=>[y(v.$slots,"first",{},()=>{var f;return[C(R,{color:e.color,variant:e.variant,size:e.size,icon:b.value,to:(f=e.to)==null?void 0:f.call(e,1)},null,8,["color","variant","size","icon","to"])]})]),_:3},8,["class"])):_("",!0),e.showControls||n.prev?(i(),c(l(De),{key:1,"as-child":"",class:I(x.value.prev({class:(J=a.ui)==null?void 0:J.prev}))},{default:d(()=>[y(v.$slots,"prev",{},()=>{var f;return[C(R,{color:e.color,variant:e.variant,size:e.size,icon:p.value,to:z>1?(f=e.to)==null?void 0:f.call(e,z-1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):_("",!0),(i(!0),A(G,null,T(D,(f,O)=>{var X,Y;return i(),A(G,null,[f.type==="page"?(i(),c(l(Ee),{key:O,"as-child":"",value:f.value,class:I(x.value.item({class:(X=a.ui)==null?void 0:X.item}))},{default:d(()=>[y(v.$slots,"item",w({ref_for:!0},{item:f,index:O,page:z,pageCount:V}),()=>{var Z;return[C(R,{color:z===f.value?e.activeColor:e.color,variant:z===f.value?e.activeVariant:e.variant,size:e.size,label:String(f.value),ui:{label:x.value.label()},to:(Z=e.to)==null?void 0:Z.call(e,f.value),square:""},null,8,["color","variant","size","label","ui","to"])]})]),_:2},1032,["value","class"])):(i(),c(l(ze),{key:f.type,index:O,"as-child":"",class:I(x.value.ellipsis({class:(Y=a.ui)==null?void 0:Y.ellipsis}))},{default:d(()=>[y(v.$slots,"ellipsis",{},()=>[C(R,{color:e.color,variant:e.variant,size:e.size,icon:e.ellipsisIcon||l(o).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:2},1032,["index","class"]))],64)}),256)),e.showControls||n.next?(i(),c(l(Fe),{key:2,"as-child":"",class:I(x.value.next({class:(Q=a.ui)==null?void 0:Q.next}))},{default:d(()=>[y(v.$slots,"next",{},()=>{var f;return[C(R,{color:e.color,variant:e.variant,size:e.size,icon:g.value,to:z<V?(f=e.to)==null?void 0:f.call(e,z+1):void 0},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):_("",!0),e.showControls||n.last?(i(),c(l(Se),{key:3,"as-child":"",class:I(x.value.last({class:(W=a.ui)==null?void 0:W.last}))},{default:d(()=>[y(v.$slots,"last",{},()=>{var f;return[C(R,{color:e.color,variant:e.variant,size:e.size,icon:u.value,to:(f=e.to)==null?void 0:f.call(e,V)},null,8,["color","variant","size","icon","to"])]})]),_:2},1032,["class"])):_("",!0)]}),_:2},1032,["class"])]}),_:3},16,["class"])}}},Ke={class:"sm:grid sm:grid-cols-2 lg:grid-cols-3"},Oe={class:"flex-1"},He={class:"h4"},Je={class:"h6"},Qe={class:"h5"},Ye=$({__name:"index",async setup(e){let t,a;const{query:r}=ye(),n=be(Number(r.page)||1),{data:s}=([t,a]=ae(()=>te("sites",()=>H("sites").count())),t=await t,a(),t),o=q(()=>`sites/page/${n.value}/${s.value?Math.ceil(s.value/18):0}`),{data:m}=([t,a]=ae(()=>te(o,()=>H("sites").skip(18*(n.value-1)).limit(18).all(),{transform:g=>g.flat().toSorted((u,x)=>Number(u.point)-Number(x.point))})),t=await t,a(),t),b=me({}),p=g=>(b[g]||H("types").where("path","LIKE",`%${g}`).first().then(u=>{b[g]=(u==null?void 0:u.label)||""}),b[g]);return(g,u)=>{const x=ne,v=Ge,h=Pe,L=R,z=qe,V=Te;return i(),A("div",Ke,[(i(!0),A(G,null,T(l(m),P=>(i(),c(z,{key:P.id,class:"sm:flex sm:flex-col",ui:{header:"flex",body:"flex-1",footer:"flex items-center justify-between"}},{header:d(()=>[U("div",Oe,[U("h3",He,M(P.name),1),U("p",Je,M(p(P.type)||P.type),1)]),C(x,{src:P.logo,size:"xl"},null,8,["src"])]),footer:d(()=>[C(h,null,{default:d(()=>[(i(!0),A(G,null,T(P.keywords.replace(new RegExp("^\\s*((?:\\w|,\\s?){1,15}(?:\\w|(?<=\\w)[^,\\w](?=\\w))*).*"),"$1").split(","),(D,N)=>(i(),c(v,{key:N,variant:N%2!==0?"outline":"subtle"},{default:d(()=>[u[1]||(u[1]=U("span",{class:"text-secondary"},"#",-1)),E(M(D.trim()),1)]),_:2,__:[1]},1032,["variant"]))),128))]),_:2},1024),C(h,null,{default:d(()=>[(i(!0),A(G,null,T(P.sameAs,(D,N)=>(i(),c(L,{key:N,icon:"i-lucide-link",variant:N%2===0?"outline":"subtle",color:"secondary",to:D,external:""},null,8,["variant","to"]))),128))]),_:2},1024)]),default:d(()=>[U("address",Qe,M(P.geo.address),1)]),_:2},1024))),128)),C(V,{page:l(n),"onUpdate:page":u[0]||(u[0]=P=>xe(n)?n.value=P:null),class:"col-start-1 -col-end-1 mt-4 sm:mt-6 lg:mt-8",ui:{list:"justify-center"},total:l(s)||0,"items-per-page":18,to:P=>({query:{page:P}})},null,8,["page","total","to"])])}}});export{Ye as default};
